<!DOCTYPE html>
<html lang="ru"xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <title>Быки и Коровы</title>
    <link rel="stylesheet" href="style.css" type="text/css">
</head>
<body>
    <div id="conteiner">
        <div id="title">
            <h1>Игра "Быки &#128002; и Коровы &#128004;"</h1>
            <h2>Введите четыре различные цифры (0 может стоять на первом месте):</h2>
        </div>
        <div id="inputBlock">
            <input type="number" id="input" max="4" value="" />
        </div>
        <button id="button" onclick="myFunction()">Угадать число</button>
        <table id="history">
            <thead>
                <tr>
                    <th>Ваше число</th>
                    <th>Быки</th>
                    <th>Коровы</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <p id="demo"></p>
    <script>
        let secretNumber = generateNumber();
        function generateNumber(){
            let digits=[];
            while(digits.length<4){
                let digit=Math.floor(Math.random()*10);
                if(!digits.includes(digit))digits.push(digit);
            }
            return digits.join('');
        }
        function countBullsAndCows(guess){
            let bulls=0,cows=0;
            for(let i=0;i<4;i++){
                if(guess[i]===secretNumber[i])bulls++;
                else if(secretNumber.includes(guess[i]))cows++;
            }
            return {bulls,cows};
        }
        function myFunction(){
            let input=document.getElementById("input").value;
            if (input.length !==4||!/^\d{4}$/.test(input)||new Set(input).size!==4){
                alert("Пожалуйста, введите 4 уникальные цифры");
                return;
            }
            let result=countBullsAndCows(input);
            let tableBody=document.querySelector("#history tbody");
            let newRow=tableBody.insertRow(0);
            newRow.insertCell(0).textContent=input;
            newRow.insertCell(1).textContent=result.bulls;
            newRow.insertCell(2).textContent=result.cows;
            if(result.bulls===4){
                alert("Поздравляем! Вы угадали число!");
                secretNumber = generateNumber();
                tableBody.innerHTML="";
            }
            document.getElementById("input").value="";
        }
    </script>
</body>
</html>
